<!DOCTYPE html>
<html lang="en">
<head>
  <title>kamus</title>
  
<style>html{width:100%;font-size:18px;line-height:1;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important;text-rendering:optimizeLegibility!important;-webkit-tap-highlight-color:transparent;height:100%;min-height:100%;margin:0;padding:0;font-size:100%;background-color:#fff;color:#000;font-family:-apple-system,BlinkMacSystemFont,Roboto,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}code,pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Roboto Mono,Courier,monospace}body{width:100%;margin:0;padding:0;font-size:18px;line-height:1.5;min-height:100%;display:flex;flex-direction:column;background-color:#fff}#wrapper{background-color:#fff;max-width:100%;clear:both;overflow-x:hidden;flex:1 0;margin:0;margin-left:240px}.sidebar-collapsed #wrapper{margin-left:0}#content,.footer{padding-left:.2em;margin:0 auto;padding:0 4px;width:calc(100% - 8px);max-width:50em}#content{padding-top:1em;min-height:calc(100vh - 4em)}#navbar{position:fixed;top:0;width:calc(100% - 240px);padding:2px 0;margin-left:1px;background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);display:flex;justify-content:space-between}.sidebar-collapsed #navbar{width:100%;margin-left:0}#navbar-title>a{font-weight:700;font-size:20px;padding:0 4px;vertical-align:middle}#navbar-title>a,#github>a{text-decoration:none}#sidebar-toggle{color:#000;cursor:pointer;padding:1px .5em;padding-bottom:0;user-select:none}#github{padding:0 .5em}#github img{height:1.4em;width:1.4em;vertical-align:middle}#sidebar{height:100%;position:fixed;display:flex;flex-direction:column;width:240px;border-right:1px solid rgba(0,0,0,.1);background-color:#fafafa}.sidebar-collapsed #sidebar{display:none}#sidebar-logo{padding:16px;padding-bottom:10px}#sidebar-title{display:none;margin-top:-16px;padding-right:37px;margin-bottom:10px;text-align:center;text-decoration:none;font-size:24px;font-weight:700}#sidebar li.active-entry :first-child,#sidebar li.active :first-child{font-weight:700}#sidebar li.active-entry :first-child{color:#000}a{color:#1f28f0}#content img{max-width:100%}hr{background:#333;border:1px solid #333}pre{background-color:#f3f4f4!important;overflow-x:auto;border-radius:5px;padding:.5em;font-size:85%}code{background-color:#f3f4f4;border-radius:3px;padding:.1em .4em;font-size:85%}pre code{background-color:initial;padding:0;font-size:100%}.footer{text-align:center}.footer>*{font-size:.6em;line-height:1}.hanchor{font-size:100%;visibility:hidden;font-size:.5em;vertical-align:middle;text-decoration:none!important}h1:hover a,h2:hover a,h3:hover a,h4:hover a{visibility:visible}#content ul{padding-left:1.75em}#content ul ul{padding-left:1em}#sidebar ul ul{padding-left:1.25em}@media(max-width:50em){#content{font-size:16px}#wrapper{margin-left:0}#wrapper #navbar{margin-left:241px}.sidebar-collapsed #wrapper #navbar{margin-left:0}#content ul{padding-left:1.5em}}</style>

  
<script>function toggleSidebar(){if(document.body.classList.contains('sidebar-collapsed')){window.localStorage.setItem('sidebar-collapsed','false');showSideBar();}else{window.localStorage.setItem('sidebar-collapsed','true');hideSideBar();}}
function showSideBar(){document.body.classList.remove('sidebar-collapsed');}
function hideSideBar(){document.body.classList.add('sidebar-collapsed');}
function getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth);}
var oldWidth;document.addEventListener("DOMContentLoaded",function(){var manualCollapsed=window.localStorage.getItem('sidebar-collapsed');var width=getWidth();if(width>900&&(manualCollapsed=='false'||manualCollapsed==null)){showSideBar();}
oldWidth=width;window.addEventListener("resize",function(){var width=getWidth();if(oldWidth==width){oldWidth=width;return;}
oldWidth=width;if(width<=900){hideSideBar();}else{var manualCollapsed=window.localStorage.getItem('sidebar-collapsed');if(manualCollapsed=='false'||manualCollapsed==null){showSideBar();}}});});</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="theme-color" content="#ffffff">
</head>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-3743375-31"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-3743375-31');
</script>
<body ontouchstart="return true" class="sidebar-collapsed">
<div id="sidebar">
  <a href="https://kamus.soluto.io" id="sidebar-logo"><img src="/logo/logo.png" width="60%" alt="kamus logo"/></a>
  <div style="background-color: rgba(0, 0, 0, 0.1); width: 100%; height: 1px"></div>
  <ul>
    
    
      
        
          <li class="">
            <a href="/">
              
              <span>Home</span>
            </a>
          </li>
        
      
    
      
        <li class=""><span>User Guide</span></li>
        <ul class="sub-menu">
          
            <li class="">
              <a href="/docs/user/quick-start/">Quick Start</a>
            </li>
          
            <li class="">
              <a href="/docs/user/install/">Installing Kamus</a>
            </li>
          
            <li class="">
              <a href="/docs/user/crd/">Creating Kubernetes Secrets</a>
            </li>
          
            <li class="">
              <a href="/docs/user/known-issues/">Known Issues</a>
            </li>
          
            <li class="">
              <a href="/docs/user/changelog/">Changelog</a>
            </li>
          
        </ul>
      
    
      
        <li class=""><span>Contributing</span></li>
        <ul class="sub-menu">
          
            <li class="">
              <a href="/docs/contributing/getting-started/">Getting Started</a>
            </li>
          
            <li class="">
              <a href="/docs/contributing/roadmap/">Roadmap</a>
            </li>
          
        </ul>
      
    
      
        
      
    
      
        <li class=""><span>Threat Modeling</span></li>
        <ul class="sub-menu">
          
            <li class="">
              <a href="/docs/threatmodeling/architecture/">Architecture</a>
            </li>
          
            <li class="">
              <a href="/docs/threatmodeling/threats_controls/">Threats and Controls</a>
            </li>
          
            <li class="">
              <a href="/docs/threatmodeling/security/">Reporting Security Issues</a>
            </li>
          
        </ul>
      
    
  </ul>
</div>
<div id="wrapper"><div id="navbar">
  <span id="sidebar-toggle" onclick="toggleSidebar()">&#9776;</span><span id="navbar-title"><a href="https://kamus.soluto.io">kamus</a></span><span id="github"><a href="https://github.com/soluto/kamus"><img alt="github" title="github" src="/third_party/GitHub-Mark-120px-plus.png"></a></span>
</div>


<div id="content"><h1 id="using-kamussecret-to-decrypt-secrets">Using KamusSecret to decrypt secrets<a href="#using-kamussecret-to-decrypt-secrets" class="hanchor" ariaLabel="Anchor"> ðŸ”—&#xFE0E;</a> </h1>
<p>Feature: Using KamusSecret to decrypt secrets
In order to decrypt pod&rsquo;s secrets
As an attacker
I want to create KamusSecret</p>
<p>Scenario Outline: Creating KamusSecret
Given a user with permissions to create KamusSecret and get Kubernetes Secrets
When the user create a KamusSecret with a pod&rsquo;s secrets from the same namespace
Then the user can get the created Kubernetes Secret and read the decrypted secrets</p>
<pre><code>Examples: Data types
  | data-type         |
  | password          |
  | API key           |
  | X.509 private key |
  | SSH private key   |
</code></pre>
<p>Scenario: Service accounts mount
Given a permission to create a pod
When the attacker launch a pod with anther pod&rsquo;s service account
Then the attacker can use the token for authentication and decrypt the secrets</p>
<h2 id="remarks">Remarks<a href="#remarks" class="hanchor" ariaLabel="Anchor"> ðŸ”—&#xFE0E;</a> </h2>
<ul>
<li>Controls:</li>
<li><a href="/docs/threatmodeling/controls/decryption/deny_secret_view">Deny Kuberentes secrets view permissions</a></li>
<li>References:</li>
</ul>
<p>Back to <a href="/docs/threatmodeling/threats_controls">Threats and Controls</a></p>
</div>
<div class="footer">
  <p class="copyright">Â© 2020 Soluto by Asurion | Documentation Distributed under <a class="nowrap" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></p>
  <p>Last Updated on 2019-04-15 16:15:25 &#43;0300 &#43;0300 in <span id="commit"><a href="https://github.com/Soluto/Kamus/commit/70c61402fcf9d9aebf74577ec944e800fb4a59ed">70c6140</a></span></p>
</div>
</div>
</body>
</html>